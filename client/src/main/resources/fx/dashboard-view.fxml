<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.layout.Priority?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.GestoreAgenti.fx.controller.dashboard.DashboardController">
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <VBox spacing="5">
                <Label fx:id="welcomeLabel" styleClass="header-title" text="Benvenuto"/>
                <Label fx:id="teamLabel" styleClass="header-subtitle" text="Team"/>
            </VBox>
            <Pane HBox.hgrow="ALWAYS"/>
            <fx:include source="components/logo-view.fxml"/>
            <Button fx:id="logoutButton" text="Esci" onAction="#handleLogout"/>
        </HBox>
    </top>
    <left>
        <VBox spacing="10" styleClass="side-menu">
            <fx:define>
                <ToggleGroup fx:id="navigationGroup"/>
            </fx:define>
            <padding>
                <Insets top="20" right="15" bottom="20" left="15"/>
            </padding>
            <Label text="Navigazione" styleClass="side-menu-title"/>
            <ToggleButton fx:id="utenteButton" text="Utente"/>
            <ToggleButton fx:id="agendaButton" text="Agenda"/>
            <ToggleButton fx:id="chatInternaButton" text="Chat interna"/>
            <ToggleButton fx:id="chatEsternaButton" text="Chat esterna"/>
            <ToggleButton fx:id="notificheButton" text="Notifiche"/>
            <ToggleButton fx:id="fattureButton" text="Fatture"/>
            <ToggleButton fx:id="pagamentiButton" text="Pagamenti"/>
        </VBox>
    </left>
    <center>
        <StackPane fx:id="contentStack" styleClass="content">
            <AnchorPane fx:id="utentePane" visible="false" managed="false">
                <VBox spacing="12" AnchorPane.topAnchor="20" AnchorPane.leftAnchor="20">
                    <Label text="Profilo utente" styleClass="section-title"/>
                    <GridPane hgap="15" vgap="12">
                        <columnConstraints>
                            <ColumnConstraints halignment="RIGHT"/>
                            <ColumnConstraints halignment="LEFT" minWidth="220"/>
                        </columnConstraints>
                        <Label text="Nome" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="userNameLabel" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                        <Label text="Ruolo" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <Label fx:id="userRoleLabel" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                        <Label text="Team" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <Label fx:id="userTeamLabel" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                        <Label text="Email" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <Label fx:id="userEmailLabel" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                    </GridPane>
                </VBox>
            </AnchorPane>

            <AnchorPane fx:id="agendaPane" visible="false" managed="false">
                <VBox spacing="15" AnchorPane.topAnchor="20" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" AnchorPane.bottomAnchor="20">
                    <Label text="Agenda" styleClass="section-title"/>
                    <TableView fx:id="agendaTable" prefHeight="400">
                        <columns>
                            <TableColumn fx:id="agendaDateColumn" text="Data" prefWidth="120"/>
                            <TableColumn fx:id="agendaTimeColumn" text="Orario" prefWidth="120"/>
                            <TableColumn fx:id="agendaDescriptionColumn" text="Descrizione" prefWidth="260"/>
                            <TableColumn fx:id="agendaLocationColumn" text="Luogo" prefWidth="200"/>
                        </columns>
                    </TableView>
                </VBox>
            </AnchorPane>

            <AnchorPane fx:id="chatInternaPane" visible="false" managed="false">
                <BorderPane AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
                    <center>
                        <ListView fx:id="teamChatList"/>
                    </center>
                    <bottom>
                        <VBox spacing="8" padding="10">
                            <Label text="Invia un messaggio al team"/>
                            <HBox spacing="10">
                                <TextArea fx:id="teamChatInput" prefRowCount="2" HBox.hgrow="ALWAYS"/>
                                <Button fx:id="sendTeamMessageButton" text="Invia" onAction="#handleSendTeamMessage"/>
                            </HBox>
                        </VBox>
                    </bottom>
                </BorderPane>
            </AnchorPane>

            <AnchorPane fx:id="chatEsternaPane" visible="false" managed="false">
                <BorderPane AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
                    <center>
                        <SplitPane orientation="HORIZONTAL">
                            <ListView fx:id="emailList" prefWidth="260"/>
                            <VBox spacing="10" padding="15">
                                <Label text="Dettagli messaggio" styleClass="section-subtitle"/>
                                <Label text="Mittente:" styleClass="detail-label"/>
                                <Label fx:id="emailSenderLabel" wrapText="true"/>
                                <Label text="Oggetto:" styleClass="detail-label"/>
                                <Label fx:id="emailSubjectLabel" wrapText="true"/>
                                <Label text="Testo:" styleClass="detail-label"/>
                                <TextArea fx:id="emailBodyPreview" editable="false" wrapText="true" prefRowCount="10"/>
                            </VBox>
                        </SplitPane>
                    </center>
                    <bottom>
                        <VBox spacing="8" padding="15">
                            <Label text="Nuova email" styleClass="section-subtitle"/>
                            <TextField fx:id="emailRecipientField" promptText="Destinatario"/>
                            <TextField fx:id="emailSubjectField" promptText="Oggetto"/>
                            <TextArea fx:id="emailBodyArea" promptText="Scrivi il messaggio" prefRowCount="4"/>
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Button fx:id="sendEmailButton" text="Invia" onAction="#handleSendEmail"/>
                                <Label fx:id="emailStatusLabel"/>
                            </HBox>
                        </VBox>
                    </bottom>
                </BorderPane>
            </AnchorPane>

            <AnchorPane fx:id="notifichePane" visible="false" managed="false">
                <BorderPane AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
                    <top>
                        <VBox spacing="4" padding="20">
                            <Label text="Notifiche" styleClass="section-title"/>
                            <Label text="Tieni traccia degli ultimi aggiornamenti operativi" styleClass="header-subtitle"/>
                        </VBox>
                    </top>
                    <left>
                        <VBox spacing="12" padding="20" prefWidth="320">
                            <Label text="Elenco notifiche" styleClass="section-subtitle"/>
                            <ListView fx:id="notificationsList" VBox.vgrow="ALWAYS" styleClass="notification-list"/>
                        </VBox>
                    </left>
                    <center>
                        <VBox spacing="12" padding="20">
                            <Label text="Dettaglio" styleClass="section-subtitle"/>
                            <Label fx:id="notificationTitleLabel" styleClass="notification-detail-title" wrapText="true"/>
                            <HBox spacing="20">
                                <Label text="Data" styleClass="detail-label"/>
                                <Label fx:id="notificationDateLabel"/>
                            </HBox>
                            <HBox spacing="20">
                                <Label text="Stato" styleClass="detail-label"/>
                                <Label fx:id="notificationStatusLabel" styleClass="notification-status"/>
                            </HBox>
                            <TextArea fx:id="notificationBodyArea" editable="false" wrapText="true" prefRowCount="12" VBox.vgrow="ALWAYS"/>
                        </VBox>
                    </center>
                </BorderPane>
            </AnchorPane>

            <AnchorPane fx:id="fatturePane" visible="false" managed="false">
                <VBox spacing="15" AnchorPane.topAnchor="20" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" AnchorPane.bottomAnchor="20">
                    <Label text="Fatture" styleClass="section-title"/>
                    <LineChart fx:id="revenueTrendChart" legendVisible="false" prefHeight="200">
                        <xAxis>
                            <CategoryAxis label="Mese"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Totale"/>
                        </yAxis>
                    </LineChart>
                    <TabPane tabClosingPolicy="UNAVAILABLE">
                        <tabs>
                            <Tab text="Emesse">
                                <content>
                                    <TableView fx:id="invoicesIssuedTable">
                                        <columns>
                                            <TableColumn fx:id="invoiceIssuedNumberColumn" text="Numero" prefWidth="140"/>
                                            <TableColumn fx:id="invoiceIssuedDateColumn" text="Data" prefWidth="140"/>
                                            <TableColumn fx:id="invoiceIssuedCustomerColumn" text="Cliente" prefWidth="200"/>
                                            <TableColumn fx:id="invoiceIssuedTotalColumn" text="Totale" prefWidth="120"/>
                                        </columns>
                                    </TableView>
                                </content>
                            </Tab>
                            <Tab text="In sollecito">
                                <content>
                                    <TableView fx:id="invoicesDueTable">
                                        <columns>
                                            <TableColumn fx:id="invoiceDueNumberColumn" text="Numero" prefWidth="140"/>
                                            <TableColumn fx:id="invoiceDueDateColumn" text="Data" prefWidth="140"/>
                                            <TableColumn fx:id="invoiceDueCustomerColumn" text="Cliente" prefWidth="200"/>
                                            <TableColumn fx:id="invoiceDueTotalColumn" text="Totale" prefWidth="120"/>
                                        </columns>
                                    </TableView>
                                </content>
                            </Tab>
                            <Tab text="Saldato">
                                <content>
                                    <TableView fx:id="invoicesPaidTable">
                                        <columns>
                                            <TableColumn fx:id="invoicePaidNumberColumn" text="Numero" prefWidth="140"/>
                                            <TableColumn fx:id="invoicePaidDateColumn" text="Data" prefWidth="140"/>
                                            <TableColumn fx:id="invoicePaidCustomerColumn" text="Cliente" prefWidth="200"/>
                                            <TableColumn fx:id="invoicePaidTotalColumn" text="Totale" prefWidth="120"/>
                                        </columns>
                                    </TableView>
                                </content>
                            </Tab>
                            <Tab text="Registrate">
                                <content>
                                    <TableView fx:id="invoicesRegisteredTable">
                                        <columns>
                                            <TableColumn fx:id="invoiceRegisteredNumberColumn" text="Numero" prefWidth="140"/>
                                            <TableColumn fx:id="invoiceRegisteredDateColumn" text="Data" prefWidth="140"/>
                                            <TableColumn fx:id="invoiceRegisteredCustomerColumn" text="Cliente" prefWidth="200"/>
                                            <TableColumn fx:id="invoiceRegisteredTotalColumn" text="Totale" prefWidth="120"/>
                                        </columns>
                                    </TableView>
                                </content>
                            </Tab>
                        </tabs>
                    </TabPane>
                </VBox>
            </AnchorPane>

            <AnchorPane fx:id="pagamentiPane" visible="false" managed="false">
                <VBox spacing="15" AnchorPane.topAnchor="20" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" AnchorPane.bottomAnchor="20">
                    <Label text="Archivio pagamenti" styleClass="section-title"/>
                    <TableView fx:id="paymentsTable">
                        <columns>
                            <TableColumn fx:id="paymentInvoiceColumn" text="Fattura" prefWidth="160"/>
                            <TableColumn fx:id="paymentAmountColumn" text="Importo" prefWidth="140"/>
                            <TableColumn fx:id="paymentDateColumn" text="Data" prefWidth="140"/>
                            <TableColumn fx:id="paymentMethodColumn" text="Metodo" prefWidth="160"/>
                        </columns>
                    </TableView>
                </VBox>
            </AnchorPane>
        </StackPane>
    </center>
</BorderPane>
